// --- CONFIGURATION ---
        const SUPABASE_URL = 'https://thxyvciairbocmogbsaa.supabase.co';
        const SUPABASE_KEY = 'PASTE_YOUR_KEY_HERE';
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        function App() {
            const [user, setUser] = useState({ username: '', password: '' });
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [rememberMe, setRememberMe] = useState(true); // Default to on
            const [loading, setLoading] = useState(false);
            const [status, setStatus] = useState('');
            const [goals, setGoals] = useState([]);
            const [history, setHistory] = useState({});
            const [currentDate, setCurrentDate] = useState(new Date());
            const [newGoal, setNewGoal] = useState('');

            const dateKey = currentDate.toISOString().split('T')[0];

            // Check for saved session on startup
            useEffect(() => {
                const savedUser = localStorage.getItem('journally_user');
                if (savedUser) {
                    const parsed = JSON.parse(savedUser);
                    setUser(parsed);
                    autoLogin(parsed);
                }
            }, []);

            const autoLogin = async (userData) => {
                setLoading(true);
                const { data } = await supabase
                    .from('journally_data')
                    .select('*')
                    .eq('user_id', userData.username.toLowerCase())
                    .single();
                
                if (data && data.content.password === userData.password) {
                    setGoals(data.content.goals || []);
                    setHistory(data.content.history || {});
                    setIsLoggedIn(true);
                }
                setLoading(false);
            };

            const handleLogin = async (e) => {
                e.preventDefault();
                setLoading(true);
                setStatus('Connecting...');

                const { data, error } = await supabase
                    .from('journally_data')
                    .select('*')
                    .eq('user_id', user.username.toLowerCase())
                    .single();

                if (data) {
                    if (data.content.password === user.password) {
                        if (rememberMe) localStorage.setItem('journally_user', JSON.stringify(user));
                        setGoals(data.content.goals || []);
                        setHistory(data.content.history || {});
                        setIsLoggedIn(true);
                    } else {
                        alert("Incorrect password.");
                    }
                } else {
                    const confirmNew = confirm("Create new account?");
                    if (confirmNew) {
                        const initialData = { user_id: user.username.toLowerCase(), content: { password: user.password, goals: [], history: {} }};
                        await supabase.from('journally_data').insert(initialData);
                        if (rememberMe) localStorage.setItem('journally_user', JSON.stringify(user));
                        setIsLoggedIn(true);
                    }
                }
                setLoading(false);
            };

            const logout = () => {
                localStorage.removeItem('journally_user');
                location.reload();
            };
